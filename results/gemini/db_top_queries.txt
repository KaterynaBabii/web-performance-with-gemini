                                            query                                            | calls | mean_exec_time 
---------------------------------------------------------------------------------------------+-------+----------------
 SELECT                                                                                     +|    50 |         500.88
           p.id,                                                                            +|       | 
           p.name,                                                                          +|       | 
           p.price,                                                                         +|       | 
           p.category_id,                                                                   +|       | 
           COALESCE(SUM(up.preference_score), $2) as relevance_score,                       +|       | 
           COUNT(DISTINCT oi.order_id) as popularity                                        +|       | 
         FROM products p                                                                    +|       | 
         LEFT JOIN user_preferences up ON p.category_id = up.category_id AND up.user_id = $1+|       | 
         LEFT JOIN order_items oi ON p.id = oi.product_id                                   +|       | 
         LEFT JOIN orders o ON oi.order_id = o.id                                           +|       | 
         GROUP BY p.id, p.name, p.price, p.category_id                                      +|       | 
         ORDER BY relevance_score DESC, popularity DESC                                     +|       | 
         LIMIT $3                                                                            |       | 
 SELECT p.*, c.name as category_name, c.parent_id                                           +|    50 |           4.57
         FROM products p                                                                    +|       | 
         JOIN categories c ON p.category_id = c.id                                          +|       | 
         WHERE p.name LIKE $1 OR p.description LIKE $1                                      +|       | 
         ORDER BY p.created_at DESC                                                          |       | 
 SELECT * FROM orders WHERE user_id = $1                                                     |    50 |           0.04
 SELECT * FROM users WHERE id = $1                                                           |    50 |           0.03
 SELECT * FROM order_items WHERE order_id = $1                                               |    92 |           0.02
 SELECT * FROM user_preferences WHERE user_id = $1                                           |    50 |           0.01
 SELECT * FROM user_activity WHERE user_id = $1 ORDER BY created_at DESC LIMIT $2            |    50 |           0.00
(7 rows)

